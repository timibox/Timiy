---
title: 机器人自定义变量说明
date: 2021-05-07
url: variable
cover_img: https://gitee.com/htmlmi/htmlmi/raw/master//images/tool/%E5%8F%98%E9%87%8F.png
fenlei: 软件开发
categories: 
- 作品开发
tags:
- QQ机器人
- 变量
- 自定义
---
鲨鱼酱是一款高智能的全自动AI机器人，具有高度自定义的变量，可帮助你实现更多高级功能
本文档仅用于你不会用的时候做参考学习，如有错误欢迎留言提出，**文档正在逐渐完善，敬请期待**

### 说明：

1. [] 当括起来的表示为参数时，请勿加[]，需要加的一般有说明。
2. () 括起来的表示可有可无，请勿加()。
3. /  表示或者，只能从多个中选择一个。
4. 可空参数都可以连带着前面的分割符('>=<'或'-')一起省略(前提是省略后不影响后续参数)
5. 如果没有说明，则变量只在回复中生效。

快捷搜索： `Ctrl + F`

### 常用变量

`【艾特】`变量说明：
`【艾特】`放在关键词中，表示 艾特机器人。
`【艾特】`放在回复中，表示 艾特发送者。

> 如果想艾特指定人，[CQ:at,qq=xxx] xxx改为要@的人的QQ就行了。

`【内容】`变量说明：
`【内容】`填写在回复中，表示子关键词，子关键词与匹配规则相关，具体见下个说明（匹配规则说明）。
`【子关键词=[内容]】` 可以把[内容]赋值给变量`【内容】`

### 匹配规则说明

`完全匹配` 所设关键词和发言一致时(区分大小写)，匹配成功。完全匹配不存在子关键词。
`模糊匹配` 所设关键词包含于发言中(不区分大小写)，匹配成功。子关键词是发言中非关键词的部分。
`前缀匹配` 所设关键词是发言的前缀(区分大小写)，匹配成功。子关键词是发言中的非前缀的部分。
`正则匹配` 所设关键词(即表达式)与发言相匹配时（匹配规则为完全匹配），匹配成功。子关键词是第一个子表达式(第一对英文括号括起来的表达式)所匹配的内容。
若想取出其余子表达式匹配的结果，可用：`【内容x】`，其代表正则表达式匹配的第x个子表达式匹配的文本。

### 高级匹配规则
`多匹配规则：`
在前三个匹配规则中，关键词添加前缀[多条]，即可开启多匹配。多匹配规则中，多个关键词之间用"|"分隔，只要其中一个关键词匹配，即匹配。
若要匹配"|"，用"#hz"代替。与"||"分割符不同的是，用"||"分割实际是自动添加多条回复，而本规则只在同一条回复下。
`正则的查找匹配规则：`
在最后一个匹配规则(正则匹配)中，关键词添加前缀[查找]，即可开启查找匹配。
`查找匹配规则：`
当表达式所能匹配的文本在发言中，即为匹配。（不加[查找]是完全匹配规则，即表达式完全与发言相匹配）

在回复中，以下变量将被替换为特定内容
`【换行】` 即换行符。
`【关键词】`即匹配到的关键词
`【头像(-大/中/小/超小)】`发送者QQ头像,省略默认为“-中”。
`【随机表情】`随机一个表情
`【msgID】` 触发消息的ID。
`【msg】` 触发的消息。
`【msg [ID]】` 获取指定ID的消息，当[ID]为负数或0时，获取向前第[ID]条消息。
当[ID]为正数时，获取指定msgID为[ID]的消息。注意msg后要加空格。
`【当前群号/群名/群人数/群上限】`发送者所在群号/群名/群人数/群人数上限
`【发送者QQ/昵称】`发送者的QQ/昵称
`【权限】`发送者权限。分别为：主人/群主/群管/管理/群员
`【机器人名字/QQ】`机器人的昵称/QQ
`【发送者名片/性别/年龄/地区/加群时间/发言时间/管理权限/专属头衔/活跃等级】`
取发送者的特定信息，只能在群聊下触发。

> 注：加群/发言时间取出来的是时间戳。 管理权限分为：群主/管理/成员。 活跃等级即活跃头衔的名称。

### 转义

注意：`【  】  *  `   这三个符号填写在回复中有特殊含义
`【】` 括起来的内容将被自动转义，如果未匹配返回空文本。

  ```
  * 是用来分割多个回复。
  如果需要发送这些字符请先替换为对应的转义字符
  #zzk    代表【
  #yzk    代表】
  #xh     代表*
  【反转义xxx】  将xxx中的#zzk #yzk #fgf 转义为【 】 >=<。
  【转义xxx】  将xxx中的【 】转义为#zzk #yzk。
  【CQ反转义xxx】  将xxx中的 &amp; &#91; &#93; 转义为 & [ ] 
  【CQ转义xxx】  将xxx中的 & [ ] 转义为 &amp; &#91; &#93;
  ```

### 事件变量 

下面变量请填到关键词中，接收到对应事件后会调用对应关键词下的回复(请带上[])。
`[被撤管理]` 被撤销管理时调用，被撤销者相当于发送人
`[提升管理]` 被提升管理时调用，被提升者相当于发送人
`[群员被踢]` 群员被踢时被调用，被踢出者相当于发送人
`[群员离群]` 群员离开群时调用，离群者相当于发送人
`[群员入群]` 群员加入群时调用，入群者相当于发送人
`[上传文件]` 上传群文件时调用，上传者相当于发送人
`[已加好友]` 被添加好友时调用，添加者相当于发送人
`[禁言事件]` 群员被禁言或解禁时调用，被禁言/解禁者相当于发送人。如果为全员禁言/解禁则发送人为 0 

> 注释：这里的发送人是指，相当于他触发了这个关键词。

`[初始化xx]` xx可自定义，自定义在启动时将调用所有的初始化事件。注意需要设置群聊触发。
`[退出xxx]` xx可自定义，自定义在退出或停用时调用所有的退出事件。注意需要设置群聊触发。

在`[群员被踢]`、[群员入群]事件下，`【内容】`表示操作者QQ
在`[上传文件]`事件下，`【内容】`表示上传文件名称，`【内容2】`表示长传文件的大小。
在`[禁言事件]`事件下，`【内容】`表示禁言时间（单位秒），为0表示解禁；`【内容2】`表示操作者。

### 群管变量

以下变量填在回复中，触发对应关键词后，让机器人去做对应的事件（默认被操着者为发送人）
`【禁言[时间](>=<[QQ])】`触发后，禁言[QQ][时间]分钟, [时间]为0时表示解禁，省略默认[QQ]为触发者
`【踢出(QQ)】`触发后，踢出[QQ]，省略默认[QQ]为触发者
`【永久踢出(QQ)】`触发后，踢出[QQ]（同时设置不在接受入群请求），省略默认[QQ]为触发者
`【拉黑(QQ)】`拉黑[QQ] ，省略默认[QQ]为触发者
`【拉黑-警告(QQ)】`警告[QQ] 上限后拉黑，省略默认[QQ]为触发者
`【踢出-警告(QQ)】`警告[QQ] 上限后踢出，省略默认[QQ]为触发者
`【点赞(QQ)】` 点赞[QQ]，省略默认[QQ]为触发者
`【改名片[QQ]>=<[改后名片]】` 更改[QQ]的群名片为[改后名片]
`【设头衔[头衔名称](>=<[有效时间]>=<[被改QQ])】` 更改[被改QQ]头衔为[头衔名称]持续[有效时间]天。(有效时间暂时无用!)
`【设管理[被设QQ](>=<[取消])】` 加上后面的，取消管理，否则设为管理。
`【撤回(msgID)】` 撤回ID为msgID的消息。省略默认撤回触发回复的消息。
`【艾特全体】`艾特全体成员

### 系统处理

【cmd ([等待])[命令]】执行CMD命令。 如：【cmd notepad】  （运行记事本）
【运行([等待])[命令]】让windows运行指定命令（将根据输入的[命令]打开相应程序/文件夹/文档/Internet资源）。
       [等待]说明：[命令]前加上[等待]系统将等待命令执行结束。这里[]不要省略。不加则不等待执行结束。
【dos [命令行]】取系统DOS执行结果。注意: 该命令会阻塞 ,一直到cmd中的内容执行完毕后才会返回。
【延时[秒]】表示让系统等待[秒]秒后继续执行。
【延迟[秒]】同上，在Web函数操作中请使用【延迟】代替【延时】。
【调试[待调试内容]】在日志中输出[待调试内容]。
【线程执行[函数名]】启动一个新的线程来执行函数名为[函数名]的函数。
[执行时间]代表回复代码执行的时间。
【挂起[分钟]】将后续代码延迟[分钟]后执行(若要发送请使用输出流)，前面代码立即输出。本变量不占用线程，可无限添加。
【许可-创建】创建并返回一个进入许可证ID数值，此许可证ID值用作进入程序中的指定许可代码区，以避免多线程冲突。
成功返回非零整数值，失败返回0，推荐在初始化事件下使用，并且赋值给常量。
【许可-进入[许可证ID]】根据已经创建的许可证进入指定许可代码区。
在此线程未退出之前，其它线程如要通过同一个进入许可证进入该许可代码区则必须先等待此线程退出许可代码区，从而保证了指定许可代码区在任何时候都只能有一条线程进入并执行。
【许可-退出[许可证ID]】 指示当前线程将退出许可代码区，并允许其它使用同一进入许可证的线程进入此许可代码区。
【许可-删除[许可证ID]】 删除由“可证-创建”函数所创建返回的许可证。

### 私聊变量

 [私聊xxx]说明：
 [私聊XXX]向指定人(XXX)发送此变量后面的信息，前面的正常发送。 
 [私聊XXX]需要加[]，xxx可以为【发送者QQ】，来私聊触发者。